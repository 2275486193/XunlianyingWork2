# 城市天气查询功能需求文档（PRD.md）

## 1. 项目概览

| 字段 | 值 |
| :--- | :--- |
| **项目名称** | 城市天气查询功能开发 |
| **版本** | V1.0 |
| **功能目标** | 实现基于高德开放平台 Web API 的城市天气查询，以实践客户端与服务端的数据交互、HTTP 请求、JSON 解析及 Android 多线程（Handler/Looper）通信。 |
| **关键技术点** | HTTP/HTTPS 通信、JSON 数据解析、Android 多线程编程（子线程请求网络，主线程更新 UI）。 |

## 2. 功能需求

### 2.1. 核心功能点描述

| 序号 | 功能模块 | 需求描述 | 关键数据来源/技术 |
| :--- | :--- | :--- | :--- |
| 1 | **API Key 注册** | 开发者需在高德开放平台注册并获取有效的 **App Key**，用于接口调用权限校验。 | [高德开放平台 App Key 注册](https://console.amap.com/dev/key/app) |
| 2 | **城市天气查询** | 客户端向高德地图天气 API 发起 **GET** 请求，查询指定城市（通过城市代码 `city` 参数）的**实时天气**和**未来四天预报**（通过 `extensions=all`）。 | 高德 Web API: `https://restapi.amap.com/v3/weather/weatherInfo` |
| 3 | **数据解析与展示** | 客户端（App）需解析 API 返回的 **JSON 格式**数据，并将天气信息（如温度、天气现象、风力风向等）准确地渲染到用户界面。 | JSON 数据结构 |
| 4 | **异步网络请求** | 必须将网络请求操作（如使用 OkHttp）置于**子线程**中执行，防止阻塞主线程导致 **ANR**。 | Android 多线程编程，OkHttp 库 |

### 2.2. 接口规范

| 字段 | 说明 | 示例 | 备注 |
| :--- | :--- | :--- | :--- |
| **API URL** | 高德天气查询基础接口地址 | `https://restapi.amap.com/v3/weather/weatherInfo` | - |
| **请求方法** | HTTP 方法 | `GET` | - |
| **响应格式** | 服务端返回的数据格式 | `JSON` | - |

**请求参数详情：**

| 参数名 | 必填 | 类型 | 说明 | 示例值 |
| :--- | :--- | :--- | :--- | :--- |
| **key** | 是 | String | 开发者申请的高德 App Key | `<your_api_key>` |
| **city** | 是 | String | 需要查询的城市代码（如北京） | `110101` |
| **extensions** | 是 | String | 数据类型，`all` 表示获取实时+预报天气 | `all` |

**完整示例请求（用于调试）：**